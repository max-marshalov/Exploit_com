from django.shortcuts import render
from django.http import HttpResponse
from .models import Article
from .models import Category
"""def posts_list(request):
    articles = Article.objects.all()
    return render(request, 'mainPage/mainPage.html', context={'arts':articles})
 """

def by_cat(request, cat_id):
     arts = Article.objects.filter(category=cat_id)
     categories = Category.objects.all()
     current_cat = Category.objects.get(pk=cat_id)
     context = {'arts': arts, 'cats' : categories, 'current_cat' : current_cat}
     return render(request, 'mainPage/mainPage.html', context)

def index(request):
     arts = Article.objects.all()
     cats = Category.objects.all()
     context = {'arts' : arts, 'cats' : cats}
     return render(request, 'mainPage/mainPage.html', context)

def article_detail(request, id):
     article = Article.objects.get(id=id)
     return render(request, 'mainPage/art_detail.html', context={'art':article})
